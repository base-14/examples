FROM golang:1.25-alpine

WORKDIR /app

RUN apk add --no-cache git ca-certificates wget

COPY go.mod go.sum ./
RUN go mod download

EXPOSE 8080

CMD ["sh", "-c", "go build -o /tmp/parking-lot ./cmd/parking-lot && /tmp/parking-lot --mode=server --port=8080"]
