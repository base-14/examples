# Database Configuration
spring.datasource.platform=mysql
spring.datasource.url=jdbc:mysql://db:3306/company?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.testWhileIdle=true
spring.datasource.validationQuery=SELECT 1

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy
spring.jpa.properties.hibernate.format_sql=true
# spring.jpa.show-sql=true

# Service Identification
spring.application.name=${SPRING_APPLICATION_NAME:java-spring-boot-otel}
server.port=8080
service.address=0.0.0.0

# Actuator Configuration
#management.endpoints.web.exposure.include=health,info,metrics,prometheus
#management.endpoint.health.show-details=always
#management.endpoint.metrics.enabled=true
#management.endpoint.prometheus.enabled=true
#management.metrics.export.prometheus.enabled=true
#management.metrics.distribution.percentiles-histogram.http.server.requests=true
#management.metrics.enable.http.server.requests=true
#management.metrics.distribution.percentiles-histogram.http.client.requests=true
#management.metrics.enable.http.client.requests=true

management.metrics.enable.all=true
management.tracing.enabled=true
management.tracing.sampling.probability=1.0
management.tracing.propagation.type=w3c

# OpenTelemetry SDK Configuration
otel.sdk.disabled=false

# JDBC Instrumentation
otel.instrumentation.jdbc.enabled=true

# Spring Web MVC
otel.instrumentation.spring-webmvc.enabled=true

# Logback Appender - Exports logs via OTLP
# NOTE: While marked as alpha, this is production-ready and widely used
# Alternative: File-based collection or disable with otel.logs.exporter=none
otel.instrumentation.logback-appender.enabled=true
otel.instrumentation.logback-appender.experimental-log-attributes=true

# OTLP Exporter Configuration
# All signals (traces/metrics/logs) use HTTP/Protobuf by default
# Endpoints can be overridden via environment variables (see compose.yaml)
otel.exporter.otlp.protocol=${OTEL_EXPORTER_OTLP_PROTOCOL:http/protobuf}
otel.exporter.otlp.endpoint=${OTEL_EXPORTER_OTLP_ENDPOINT:http://host.docker.internal:4318}

# Enable global auto-configuration for automatic instrumentation
otel.java.global-autoconfigure.enabled=true

# Export Configuration - Enable OTLP for all three signals
otel.traces.exporter=otlp
otel.metrics.exporter=otlp
otel.logs.exporter=otlp

# Sampling Configuration
# WARNING: always_on samples 100% of traces - use probabilistic sampling in production
otel.traces.sampler=always_on

# Metrics Export Interval
otel.metric.export.interval=30s

# Resource Attributes (set via OTEL_RESOURCE_ATTRIBUTES environment variable)

# Propagators
otel.propagators=tracecontext,baggage

# Logging Configuration
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.io.opentelemetry=DEBUG
logging.level.io.micrometer=DEBUG

# Disable console logging to prevent duplicate logs in observability platforms
# All logs are sent via OpenTelemetry Logback appender (logback-spring.xml)
logging.pattern.console=